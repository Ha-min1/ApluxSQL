{
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-24.04",
  "postCreateCommand": "sudo apt-get update && sudo DEBIAN_FRONTEND=noninteractive apt-get install -y apache2 mariadb-server php php-mysqli git-lfs && curl -L https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz | tar xvz && sudo mv ngrok /usr/local/bin/",
  "postStartCommand": "bash -lc \"set -x; sudo service mariadb start; sudo mysql -e \\\"CREATE DATABASE IF NOT EXISTS gora_db;\\\"; sudo mysql -e \\\"CREATE USER IF NOT EXISTS 'db_user'@'localhost' IDENTIFIED BY 'APlux7';\\\"; sudo mysql -e \\\"GRANT ALL PRIVILEGES ON gora_db.* TO 'db_user'@'localhost';\\\"; sudo mysql -e \\\"FLUSH PRIVILEGES;\\\"; sudo mysql -e \\\"USE gora_db; CREATE TABLE IF NOT EXISTS play_log (id INT AUTO_INCREMENT PRIMARY KEY, score INT NOT NULL, accidentDetails VARCHAR(255) NULL, log_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP);\\\"; sudo sed -i 's|DocumentRoot /var/www/html|DocumentRoot /workspaces/ApluxSQL|' /etc/apache2/sites-available/000-default.conf; printf '\\n<Directory /workspaces/ApluxSQL>\\n    Options Indexes FollowSymLinks\\n    AllowOverride All\\n    Require all granted\\n</Directory>\\n' | sudo tee -a /etc/apache2/sites-available/000-default.conf; sudo service apache2 start; chmod 755 /workspaces/ApluxSQL /workspaces/ApluxSQL/api; chmod 644 /workspaces/ApluxSQL/api/save_log.php; ngrok config add-authtoken $NGROK_AUTHTOKEN > /workspaces/ApluxSQL/startup.log 2>&1\""
}